const form=document.querySelector("#task-form"),tasklist=document.querySelector(".tasklist"),clearTasks=document.querySelector(".clear-tasks"),filter=document.querySelector("#filter"),taskInput=document.querySelector("#task");let tasks=[];null!==JSON.parse(localStorage.getItem("tasks"))&&(tasks=JSON.parse(localStorage.getItem("tasks")));let completed=[];function loadEventListeners(){document.addEventListener("DOMContentLoaded",renderTasks(tasks)),form.addEventListener("submit",syncTasks),tasklist.addEventListener("click",syncTasks),clearTasks.addEventListener("click",clearAllTasks),filter.addEventListener("keyup",filterTasks)}function syncTasks(t){if("task-form"===t.target.id||t.target.parentElement.classList.contains("delete-task")||t.target.classList.contains("form-check-input")){for("task-form"===t.target.id?(""===taskInput.value?alert("No task name given."):(tasks.push(taskInput.value),localStorage.setItem("tasks",JSON.stringify(tasks)),taskInput.value=""),t.preventDefault()):t.target.parentElement.classList.contains("delete-task")?(confirm("Delete task: "+t.target.parentElement.parentElement.textContent.trim())&&(tasks.forEach(function(e,s){t.target.parentElement.parentElement.textContent.trim()===e&&tasks.splice(s,1)}),localStorage.setItem("tasks",JSON.stringify(tasks))),t.preventDefault()):t.target.classList.contains("form-check-input")&&(completed.indexOf(t.target.id)>-1?completed.splice(completed.indexOf(t.target.id),1):completed.push(t.target.id),localStorage.setItem("completed",JSON.stringify(completed)));tasklist.firstChild;)tasklist.removeChild(tasklist.firstChild);filter.value="",renderTasks(tasks)}}function renderTasks(t){t.forEach(function(t){let e;completed.indexOf(t)>-1&&(e="checked");const s=`\n            <li class="d-flex list-group-item task">\n                <div class="form-check">\n                    <input type="checkbox" ${e} class="form-check-input" id="${t}">\n                    <label class="form-check-label" for="${t}">${t}</label>\n                </div>\n                <a href="#" class="ml-auto delete-task">\n                    <i class="far fa-trash-alt"></i>\n                </a>\n            </li>\n        `,a=document.createRange().createContextualFragment(s.trim());tasklist.appendChild(a)}),t.length>1?(document.querySelector(".clear-tasks").style.display="block",document.querySelector(".filter-wrapper").style.display="block"):(document.querySelector(".clear-tasks").style.display="none",document.querySelector(".filter-wrapper").style.display="none")}function clearAllTasks(){if(confirm("This will delete ALL tasks"))for(;tasklist.firstChild;)tasklist.removeChild(tasklist.firstChild);localStorage.clear()}function filterTasks(t){const e=t.target.value.toLowerCase();document.querySelectorAll(".task").forEach(function(t){-1!==t.querySelector(".form-check-label").textContent.toLowerCase().trim().indexOf(e)?t.setAttribute("style","display: flex !important"):t.setAttribute("style","display: none !important ")})}null!==JSON.parse(localStorage.getItem("completed"))&&(completed=JSON.parse(localStorage.getItem("completed"))),loadEventListeners();